import numpy as np
from scipy.io import wavfile
import simpleaudio as sa

class AudioEngine:
    def __init__(self, sample_rate=44100, duration=2.0):
        self.sample_rate = sample_rate
        self.duration = duration

    def generate_tone(self, frequency, amplitude=0.5):
        t = np.linspace(0, self.duration, int(self.sample_rate * self.duration), False)
        tone = np.sin(2 * np.pi * frequency * t) * amplitude
        audio = tone * (2**15 - 1) / np.max(np.abs(tone))
        audio = audio.astype(np.int16)
        play_obj = sa.play_buffer(audio, 1, 2, self.sample_rate)
        return play_obj
